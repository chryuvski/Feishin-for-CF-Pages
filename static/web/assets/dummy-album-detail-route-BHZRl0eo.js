import{B as z,i as $,ab as H,z as U,q as W,f as Y,h as K,bN as J,ac as V,a5 as X,by as Z,bz as Q,bB as ee,n as o,j as a,S as ae,bJ as se,A as ne,s as G,bL as te,aU as l,t,r as re,T as m,b2 as k,bd as N,a_ as c,bD as oe,M as u,bE as ie,bF as ce,W as de,bH as le,bW as me,bb as ue,cd as pe,bI as xe,ad as he,ce as be}from"./index-qz_z9GmZ.js";const je=xe.div`
    display: flex;
    flex-direction: column;
    gap: 2rem;
    padding: 1rem 2rem 5rem;
    overflow: hidden;
`,ve=()=>{var g,v,S,f,L,A,I,R,y,B,C,F;const q=z(),{t:w}=$(),{albumId:n}=H(),r=U(),p=W.songs.detail((r==null?void 0:r.id)||"",n),e=Y({queryFn:({signal:s})=>{if(!r)throw new Error("Server not found");return K.controller.getSongDetail({apiClientProps:{server:r,signal:s},query:{id:n}})},queryKey:p}),{color:x,colorId:D}=J({id:n,src:(g=e.data)==null?void 0:g.imageUrl,srcLoaded:!e.isLoading}),d=V(),E=X(),h=Z({}),b=Q({}),M=async()=>{if(!(e!=null&&e.data))return;const s=e.data.userFavorite;try{s?await b.mutateAsync({query:{id:[e.data.id],type:o.SONG},serverId:e.data.serverId}):await h.mutateAsync({query:{id:[e.data.id],type:o.SONG},serverId:e.data.serverId}),he.setQueryData(p,{...e.data,userFavorite:!s})}catch(i){console.error(i)}},O=(v=e==null?void 0:e.data)!=null&&v.genres?((S=e==null?void 0:e.data)==null?void 0:S.genres.length)!==0:!1,j=(f=e==null?void 0:e.data)==null?void 0:f.comment,P=ee(o.SONG,be),T=()=>{d==null||d({byItemType:{id:[n],type:o.SONG},playType:E})};if(!x||D!==n)return a.jsx(ae,{container:!0});const _=[{id:"releaseYear",secondary:!1,value:(L=e==null?void 0:e.data)==null?void 0:L.releaseYear},{id:"duration",secondary:!1,value:((A=e==null?void 0:e.data)==null?void 0:A.duration)&&se(e.data.duration)}];return a.jsxs(ne,{children:[a.jsx(G,{ref:q.ref,children:a.jsx(te,{background:x,imageUrl:(I=e==null?void 0:e.data)==null?void 0:I.imageUrl,item:{route:l.LIBRARY_SONGS,type:o.SONG},title:((R=e==null?void 0:e.data)==null?void 0:R.name)||"",children:a.jsxs(G,{spacing:"sm",children:[a.jsx(t,{spacing:"sm",children:_.map((s,i)=>a.jsxs(re.Fragment,{children:[i>0&&a.jsx(m,{$noSelect:!0,children:"â€¢"}),a.jsx(m,{$secondary:s.secondary,children:s.value})]},`item-${s.id}-${i}`))}),a.jsx(t,{mah:"4rem",spacing:"md",sx:{overflow:"hidden",WebkitBoxOrient:"vertical",WebkitLineClamp:2},children:(y=e==null?void 0:e.data)==null?void 0:y.albumArtists.map(s=>a.jsx(m,{$link:!0,component:N,fw:600,size:"md",to:k(l.LIBRARY_ALBUM_ARTISTS_DETAIL,{albumArtistId:s.id}),variant:"subtle",children:s.name},`artist-${s.id}`))})]})})}),a.jsxs(je,{children:[a.jsx(c,{component:"section",children:a.jsx(t,{position:"apart",spacing:"sm",children:a.jsxs(t,{children:[a.jsx(oe,{onClick:()=>T()}),a.jsx(u,{compact:!0,loading:h.isLoading||b.isLoading,onClick:M,variant:"subtle",children:(B=e==null?void 0:e.data)!=null&&B.userFavorite?a.jsx(ie,{color:"red",size:20}):a.jsx(ce,{size:20})}),a.jsx(u,{compact:!0,onClick:s=>{e!=null&&e.data&&P(s,[e.data])},variant:"subtle",children:a.jsx(de,{size:20})})]})})}),O&&a.jsx(c,{component:"section",children:a.jsx(t,{spacing:"sm",children:(F=(C=e==null?void 0:e.data)==null?void 0:C.genres)==null?void 0:F.map(s=>a.jsx(u,{compact:!0,component:N,radius:0,size:"md",to:k(l.LIBRARY_GENRES_SONGS,{genreId:s.id}),variant:"outline",children:s.name},`genre-${s.id}`))})}),j&&a.jsx(c,{component:"section",children:a.jsx(le,{maxHeight:75,children:me(j)})}),a.jsx(c,{component:"section",children:a.jsxs(ue,{children:[a.jsx(t,{mr:5,children:a.jsx(pe,{color:"var(--danger-color)",size:30})}),a.jsx("h2",{children:w("error.badAlbum",{postProcess:"sentenceCase"})})]})})]})]},`dummy-album-detail-${n}`)};export{ve as default};
//# sourceMappingURL=dummy-album-detail-route-BHZRl0eo.js.map
