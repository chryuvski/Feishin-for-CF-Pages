import{z as y,u as g,ac as A,a5 as P,n as S,bx as D,j as t,aH as f,aI as L,i as R,P as B,L as h,a as N,w as M,K as c,M as k,W as v,X as b,Y as E,Z as F,$ as H,r as w,ab as O,A as G,ae as V}from"./index-qz_z9GmZ.js";import{u as q}from"./use-current-song-row-styles-AW__6X7H.js";import{u as z}from"./use-virtual-table-BjhVw3T4.js";import{u as K,a as U}from"./top-songs-list-query-vHKzxpfL.js";const X=({data:d,tableRef:n})=>{const i=y(),{id:e,pageKey:o}=g(),r=A(),s=P(),a=l=>{if(!l.data)return;const p=[];l.api.forEachNode(m=>{m.data&&p.push(m.data)}),r==null||r({byData:p,initialSongId:l.data.id,playType:s})},x={...e&&{artistIds:[e]}},{rowClassRules:j}=q({tableRef:n}),u=z({contextMenu:D,customFilters:x,itemType:S.SONG,pageKey:o,server:i,tableRef:n});return t.jsx(t.Fragment,{children:t.jsx(f,{children:t.jsx(L,{ref:n,shouldUpdateSong:!0,...u,getRowId:l=>l.data.uniqueId,onRowDoubleClicked:a,rowClassRules:j,rowData:d,rowModelType:"clientSide",rowSelection:"multiple"},`table-${u.rowHeight}-${i==null?void 0:i.id}`)})})},_=({data:d,itemCount:n,title:i})=>{const{t:e}=R(),o=A(),r=P(),s=async a=>{o==null||o({byData:d,playType:a})};return t.jsx(B,{p:"1rem",children:t.jsxs(h,{children:[t.jsx(h.PlayButton,{onClick:()=>s(r)}),t.jsx(h.Title,{children:e("page.albumArtistDetail.topSongsFrom",{title:i})}),t.jsx(N,{fw:"600",px:"1rem",py:"0.3rem",radius:"sm",children:n??t.jsx(M,{})}),t.jsxs(c,{position:"bottom-start",children:[t.jsx(c.Target,{children:t.jsx(k,{compact:!0,fw:"600",variant:"subtle",children:t.jsx(v,{size:15})})}),t.jsxs(c.Dropdown,{children:[t.jsx(c.Item,{icon:t.jsx(E,{}),onClick:()=>s(b.NOW),children:e("player.play",{postProcess:"sentenceCase"})}),t.jsx(c.Item,{icon:t.jsx(F,{}),onClick:()=>s(b.LAST),children:e("player.addLast",{postProcess:"sentenceCase"})}),t.jsx(c.Item,{icon:t.jsx(H,{}),onClick:()=>s(b.NEXT),children:e("player.addNext",{postProcess:"sentenceCase"})})]})]})]})})},J=()=>{var u,l,p,m,C,I,T;const d=w.useRef(null),{albumArtistId:n,artistId:i}=O(),e=i||n,o=y(),r=S.SONG,s=K({query:{id:e},serverId:o==null?void 0:o.id}),a=U({options:{enabled:!!((u=s==null?void 0:s.data)!=null&&u.name)},query:{artist:((l=s==null?void 0:s.data)==null?void 0:l.name)||"",artistId:e},serverId:o==null?void 0:o.id}),x=((m=(p=a==null?void 0:a.data)==null?void 0:p.items)==null?void 0:m.length)||0,j=w.useMemo(()=>({id:e,pageKey:r}),[e,r]);return t.jsx(G,{children:t.jsxs(V.Provider,{value:j,children:[t.jsx(_,{data:((C=a==null?void 0:a.data)==null?void 0:C.items)||[],itemCount:x,title:((I=s==null?void 0:s.data)==null?void 0:I.name)||"Unknown"}),t.jsx(X,{data:((T=a==null?void 0:a.data)==null?void 0:T.items)||[],tableRef:d})]})})};export{J as default};
//# sourceMappingURL=album-artist-detail-top-songs-list-route-C5MsLVZ-.js.map
