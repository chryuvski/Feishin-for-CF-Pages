import{i as b,dF as w,bR as j,r as p,cm as O,o as R,H as t,j as n,dn as G,t as I,cl as k,aO as S,dG as T,dl as E,M as v,dH as D,dI as L,bI as z,v as A,dk as N,s as _}from"./index-qz_z9GmZ.js";const r=k()?window.api.ipc:null,h={browserBack:t.t("setting.hotkey",{context:"browserBack",postProcess:"sentenceCase"}),browserForward:t.t("setting.hotkey",{context:"browserForward",postProcess:"sentenceCase"}),favoriteCurrentAdd:t.t("setting.hotkey",{context:"favoriteCurrentSong",postProcess:"sentenceCase"}),favoriteCurrentRemove:t.t("setting.hotkey",{context:"unfavoriteCurrentSong",postProcess:"sentenceCase"}),favoriteCurrentToggle:t.t("setting.hotkey",{context:"toggleCurrentSongFavorite",postProcess:"sentenceCase"}),favoritePreviousAdd:t.t("setting.hotkey",{context:"favoritePreviousSong",postProcess:"sentenceCase"}),favoritePreviousRemove:t.t("setting.hotkey",{context:"unfavoritePreviousSong",postProcess:"sentenceCase"}),favoritePreviousToggle:t.t("setting.hotkey",{context:"togglePreviousSongFavorite",postProcess:"sentenceCase"}),globalSearch:t.t("setting.hotkey",{context:"globalSearch",postProcess:"sentenceCase"}),localSearch:t.t("setting.hotkey",{context:"localSearch",postProcess:"sentenceCase"}),next:t.t("setting.hotkey",{context:"playbackNext",postProcess:"sentenceCase"}),pause:t.t("setting.hotkey",{context:"playbackPause",postProcess:"sentenceCase"}),play:t.t("setting.hotkey",{context:"playbackPlay",postProcess:"sentenceCase"}),playPause:t.t("setting.hotkey",{context:"playbackPlayPause",postProcess:"sentenceCase"}),previous:t.t("setting.hotkey",{context:"playbackPrevious",postProcess:"sentenceCase"}),rate0:t.t("setting.hotkey",{context:"rate0",postProcess:"sentenceCase"}),rate1:t.t("setting.hotkey",{context:"rate1",postProcess:"sentenceCase"}),rate2:t.t("setting.hotkey",{context:"rate2",postProcess:"sentenceCase"}),rate3:t.t("setting.hotkey",{context:"rate3",postProcess:"sentenceCase"}),rate4:t.t("setting.hotkey",{context:"rate4",postProcess:"sentenceCase"}),rate5:t.t("setting.hotkey",{context:"rate5",postProcess:"sentenceCase"}),skipBackward:t.t("setting.hotkey",{context:"skipBackward",postProcess:"sentenceCase"}),skipForward:t.t("setting.hotkey",{context:"skipForward",postProcess:"sentenceCase"}),stop:t.t("setting.hotkey",{context:"playbackStop",postProcess:"sentenceCase"}),toggleFullscreenPlayer:t.t("setting.hotkey",{context:"toggleFullScreenPlayer",postProcess:"sentenceCase"}),toggleQueue:t.t("setting.hotkey",{context:"toggleQueue",postProcess:"sentenceCase"}),toggleRepeat:t.t("setting.hotkey",{context:"toggleRepeat",postProcess:"sentenceCase"}),toggleShuffle:t.t("setting.hotkey",{context:"toggleShuffle",postProcess:"sentenceCase"}),volumeDown:t.t("setting.hotkey",{context:"volumeDown",postProcess:"sentenceCase"}),volumeMute:t.t("setting.hotkey",{context:"volumeMute",postProcess:"sentenceCase"}),volumeUp:t.t("setting.hotkey",{context:"volumeUp",postProcess:"sentenceCase"}),zoomIn:t.t("setting.hotkey",{context:"zoomIn",postProcess:"sentenceCase"}),zoomOut:t.t("setting.hotkey",{context:"zoomOut",postProcess:"sentenceCase"})},$=z.div`
    display: flex;
    flex-direction: column;
    gap: 1rem;
    justify-content: center;
    width: 100%;

    button {
        padding: 0 1rem;
    }
`,Q=()=>{const{t:d}=b(),{bindings:o,globalMediaHotkeys:l}=w(),{setSettings:i}=j(),[u,C]=p.useState(null),g=O(),P=R((s,e)=>{var m;e.preventDefault();const c=["Control","Alt","Shift","Meta"," ","Escape"],a=[];e.ctrlKey&&a.push("mod"),e.altKey&&a.push("alt"),e.shiftKey&&a.push("shift"),e.metaKey&&a.push("meta"),e.key===" "&&a.push("space"),c.includes(e.key)||(e.code.includes("Numpad")?e.key==="+"?a.push("numpadadd"):e.key==="-"?a.push("numpadsubtract"):e.key==="*"?a.push("numpadmultiply"):e.key==="/"?a.push("numpaddivide"):e.key==="."?a.push("numpaddecimal"):a.push(`numpad${e.key}`.toLowerCase()):e.key==="+"?a.push("equal"):a.push((m=e.key)==null?void 0:m.toLowerCase()));const y=a.join("+"),f={...o,[s]:{...o[s],hotkey:y}};i({hotkeys:{bindings:f,globalMediaHotkeys:l}}),r==null||r.send("set-global-shortcuts",f)},20),H=p.useCallback(P,[o,l,i,P]),M=p.useCallback((s,e)=>{const c={...o,[s]:{...o[s],isGlobal:e.currentTarget.checked}};i({hotkeys:{bindings:c,globalMediaHotkeys:l}}),r==null||r.send("set-global-shortcuts",c)},[o,l,i]),B=p.useCallback(s=>{const e={...o,[s]:{...o[s],hotkey:"",isGlobal:!1}};i({hotkeys:{bindings:e,globalMediaHotkeys:l}}),r==null||r.send("set-global-shortcuts",e)},[o,l,i]),F=p.useMemo(()=>{const s=Object.values(o).reduce((c,a)=>{const y=a.hotkey;return y&&(c[y]?c[y]+=1:c[y]=1),c},{});return Object.keys(s).filter(c=>s[c]>1)},[o]),K=p.useMemo(()=>{const s=Object.keys(o);return g===""?s.filter(e=>h[e]):s.filter(e=>{const c=h[e];return c?c.toLocaleLowerCase().includes(g):!1})},[o,g]);return n.jsxs(n.Fragment,{children:[n.jsx(G,{control:n.jsx(n.Fragment,{}),description:d("setting.applicationHotkeys",{context:"description",postProcess:"sentenceCase"}),title:d("setting.applicationHotkeys",{postProcess:"sentenceCase"})}),n.jsx($,{children:K.map(s=>n.jsxs(I,{noWrap:!0,children:[n.jsx(S,{readOnly:!0,style:{userSelect:"none"},value:h[s]}),n.jsx(S,{icon:n.jsx(T,{}),id:`hotkey-${s}`,onBlur:()=>C(null),onChange:()=>{},onKeyDownCapture:e=>{u===s&&H(s,e)},readOnly:!0,style:{opacity:u===s?.8:1,outline:F.includes(o[s].hotkey)?"1px dashed red":void 0},value:o[s].hotkey}),k()&&n.jsx(E,{checked:o[s].isGlobal,disabled:o[s].hotkey==="",onChange:e=>M(s,e),size:"xl",style:{opacity:o[s].allowGlobal?1:0}}),n.jsx(v,{onClick:()=>{var e;C(s),(e=document.getElementById(`hotkey-${s}`))==null||e.focus()},variant:"default",w:100,children:n.jsx(D,{})}),n.jsx(v,{onClick:()=>B(s),variant:"default",children:n.jsx(L,{})})]},`hotkey-${s}`))})]})},x=k()?window.api.localSettings:null,U=()=>{const{t:d}=b(),o=w(),{setSettings:l}=j(),i=[{control:n.jsx(A,{defaultChecked:o.globalMediaHotkeys,disabled:!k(),onChange:u=>{l({hotkeys:{...o,globalMediaHotkeys:u.currentTarget.checked}}),x.set("global_media_hotkeys",u.currentTarget.checked),u.currentTarget.checked?x.enableMediaKeys():x.disableMediaKeys()}}),description:d("setting.globalMediaHotkeys",{context:"description",postProcess:"sentenceCase"}),isHidden:!k(),title:d("setting.globalMediaHotkeys",{postProcess:"sentenceCase"})}];return n.jsx(N,{options:i})},q=()=>n.jsxs(_,{spacing:"md",children:[k()&&n.jsx(U,{}),n.jsx(Q,{})]});export{q as HotkeysTab};
//# sourceMappingURL=hotkeys-tab-BCBimGZI.js.map
