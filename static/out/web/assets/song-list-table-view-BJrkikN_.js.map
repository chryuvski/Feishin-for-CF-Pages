{"version":3,"file":"song-list-table-view-BJrkikN_.js","sources":["../../../src/renderer/features/songs/components/song-list-table-view.tsx"],"sourcesContent":["import type { AgGridReact as AgGridReactType } from '@ag-grid-community/react/lib/agGridReact';\n\nimport { RowDoubleClickedEvent } from '@ag-grid-community/core';\nimport { MutableRefObject } from 'react';\n\nimport { VirtualGridAutoSizerContainer } from '/@/renderer/components/virtual-grid';\nimport { VirtualTable } from '/@/renderer/components/virtual-table';\nimport { useCurrentSongRowStyles } from '/@/renderer/components/virtual-table/hooks/use-current-song-row-styles';\nimport { useVirtualTable } from '/@/renderer/components/virtual-table/hooks/use-virtual-table';\nimport { useListContext } from '/@/renderer/context/list-context';\nimport { SONG_CONTEXT_MENU_ITEMS } from '/@/renderer/features/context-menu/context-menu-items';\nimport { useAppFocus } from '/@/renderer/hooks';\nimport {\n    useCurrentServer,\n    useCurrentSong,\n    useCurrentStatus,\n    usePlayButtonBehavior,\n} from '/@/renderer/store';\nimport { LibraryItem, QueueSong, SongListQuery } from '/@/shared/types/domain-types';\n\ninterface SongListTableViewProps {\n    itemCount?: number;\n    tableRef: MutableRefObject<AgGridReactType | null>;\n}\n\nexport const SongListTableView = ({ itemCount, tableRef }: SongListTableViewProps) => {\n    const server = useCurrentServer();\n    const { customFilters, handlePlay, id, pageKey } = useListContext();\n    const isFocused = useAppFocus();\n    const currentSong = useCurrentSong();\n    const status = useCurrentStatus();\n\n    const { rowClassRules } = useCurrentSongRowStyles({ tableRef });\n\n    const tableProps = useVirtualTable<SongListQuery>({\n        columnType: 'generic',\n        contextMenu: SONG_CONTEXT_MENU_ITEMS,\n        customFilters,\n        isSearchParams: Boolean(id),\n        itemCount,\n        itemType: LibraryItem.SONG,\n        pageKey,\n        server,\n        tableRef,\n    });\n\n    const playButtonBehavior = usePlayButtonBehavior();\n    const handleRowDoubleClick = (e: RowDoubleClickedEvent<QueueSong>) => {\n        if (!e.data) return;\n        handlePlay?.({ initialSongId: e.data.id, playType: playButtonBehavior });\n    };\n\n    return (\n        <VirtualGridAutoSizerContainer>\n            <VirtualTable\n                // https://github.com/ag-grid/ag-grid/issues/5284\n                // Key is used to force remount of table when display, rowHeight, or server changes\n                key={`table-${tableProps.rowHeight}-${server?.id}`}\n                ref={tableRef}\n                {...tableProps}\n                context={{\n                    ...tableProps.context,\n                    currentSong,\n                    isFocused,\n                    status,\n                }}\n                onRowDoubleClicked={handleRowDoubleClick}\n                rowClassRules={rowClassRules}\n                shouldUpdateSong\n            />\n        </VirtualGridAutoSizerContainer>\n    );\n};\n"],"names":["SongListTableView","itemCount","tableRef","server","useCurrentServer","customFilters","handlePlay","id","pageKey","useListContext","isFocused","useAppFocus","currentSong","useCurrentSong","status","useCurrentStatus","rowClassRules","useCurrentSongRowStyles","tableProps","useVirtualTable","SONG_CONTEXT_MENU_ITEMS","LibraryItem","playButtonBehavior","usePlayButtonBehavior","handleRowDoubleClick","e","VirtualGridAutoSizerContainer","jsx","VirtualTable"],"mappings":"uOAyBO,MAAMA,EAAoB,CAAC,CAAE,UAAAC,EAAW,SAAAC,KAAuC,CAClF,MAAMC,EAASC,EAAiB,EAC1B,CAAE,cAAAC,EAAe,WAAAC,EAAY,GAAAC,EAAI,QAAAC,CAAA,EAAYC,EAAe,EAC5DC,EAAYC,EAAY,EACxBC,EAAcC,EAAe,EAC7BC,EAASC,EAAiB,EAE1B,CAAE,cAAAC,CAAc,EAAIC,EAAwB,CAAE,SAAAf,EAAU,EAExDgB,EAAaC,EAA+B,CAC9C,WAAY,UACZ,YAAaC,EACb,cAAAf,EACA,eAAgB,EAAQE,EACxB,UAAAN,EACA,SAAUoB,EAAY,KACtB,QAAAb,EACA,OAAAL,EACA,SAAAD,CAAA,CACH,EAEKoB,EAAqBC,EAAsB,EAC3CC,EAAwBC,GAAwC,CAC7DA,EAAE,OACPnB,GAAA,MAAAA,EAAa,CAAE,cAAemB,EAAE,KAAK,GAAI,SAAUH,IACvD,EAEA,aACKI,EACG,CAAA,SAAAC,EAAA,IAACC,EAAA,CAIG,IAAK1B,EACJ,GAAGgB,EACJ,QAAS,CACL,GAAGA,EAAW,QACd,YAAAN,EACA,UAAAF,EACA,OAAAI,CACJ,EACA,mBAAoBU,EACpB,cAAAR,EACA,iBAAgB,EAAA,EAXX,SAASE,EAAW,SAAS,IAAIf,GAAA,YAAAA,EAAQ,EAAE,EAAA,EAaxD,CAER"}