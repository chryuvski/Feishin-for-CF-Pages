import{aP as M,z as g,ab as x,aa as B,d as L,ac as _,a5 as C,j as t,aH as j,r as b,aI as E,n as a,bx as U,bA as N,bX as P,b2 as l,aU as d,i as w,B as k,C as v,o as O,s as G,P as H,J as q,L as R,t as f,a8 as z,a9 as $,M as y,bd as A,bh as D,A as F}from"./index-qz_z9GmZ.js";import{u as V}from"./use-current-song-row-styles-AW__6X7H.js";import{u as X}from"./use-virtual-table-BjhVw3T4.js";const K=({tableRef:s})=>{const c=M(),r=g(),{itemType:e}=x(),[n]=B(),p=e,{filter:o}=L({filter:{searchTerm:n.get("query")||""},key:e}),u=_(),m=C(),S=()=>{switch(e){case a.ALBUM:return P;case a.ALBUM_ARTIST:return N;case a.SONG:return U;default:return[]}},T=i=>{if(i.data)switch(e){case a.ALBUM:c(l(d.LIBRARY_ALBUMS_DETAIL,{albumId:i.data.id}));break;case a.ALBUM_ARTIST:c(l(d.LIBRARY_ALBUM_ARTISTS_DETAIL,{albumArtistId:i.data.id}));break;case a.SONG:u==null||u({byItemType:{id:[],type:a.SONG},initialSongId:i.data.id,playType:m,query:{startIndex:0,...o}});break}},{rowClassRules:h}=V({tableRef:s}),I=X({contextMenu:S(),customFilters:o,itemType:e,pageKey:p,server:r,tableRef:s});return t.jsx(j,{children:b.createElement(E,{...I,context:{itemType:e,query:n.get("query")},getRowId:i=>i.data.id,infiniteInitialRowCount:25,key:`table-${e}-${I.rowHeight}-${r==null?void 0:r.id}`,onRowDoubleClicked:T,ref:s,rowClassRules:h,shouldUpdateSong:e===a.SONG})})},Y=({navigationId:s,tableRef:c})=>{const{t:r}=w(),{itemType:e}=x(),[n,p]=B(),o=k(),u=g(),{filter:m}=L({key:e}),{handleRefreshTable:S}=v({itemType:e,server:u}),T=O(h=>{p({query:h.target.value},{replace:!0,state:{navigationId:s}}),S(c,{...m,searchTerm:h.target.value})},200);return t.jsxs(G,{ref:o.ref,spacing:0,children:[t.jsx(H,{children:t.jsxs(q,{justify:"space-between",w:"100%",children:[t.jsx(R,{children:t.jsx(R.Title,{children:"Search"})}),t.jsx(f,{children:t.jsx(z,{defaultValue:n.get("query")||"",onChange:T,openedWidth:o.isMd?250:o.isSm?200:150})})]})}),t.jsx($,{children:t.jsxs(f,{children:[t.jsx(y,{compact:!0,component:A,fw:600,replace:!0,size:"md",state:{navigationId:s},to:{pathname:l(d.SEARCH,{itemType:a.SONG}),search:n.toString()},variant:e===a.SONG?"filled":"subtle",children:r("entity.track_other",{postProcess:"sentenceCase"})}),t.jsx(y,{compact:!0,component:A,fw:600,replace:!0,size:"md",state:{navigationId:s},to:{pathname:l(d.SEARCH,{itemType:a.ALBUM}),search:n.toString()},variant:e===a.ALBUM?"filled":"subtle",children:r("entity.album_other",{postProcess:"sentenceCase"})}),t.jsx(y,{compact:!0,component:A,fw:600,replace:!0,size:"md",state:{navigationId:s},to:{pathname:l(d.SEARCH,{itemType:a.ALBUM_ARTIST}),search:n.toString()},variant:e===a.ALBUM_ARTIST?"filled":"subtle",children:r("entity.artist_other",{postProcess:"sentenceCase"})})]})})]})},Z=()=>{const{state:s}=D(),c=b.useId(),r=(s==null?void 0:s.navigationId)||c,{itemType:e}=x(),n=b.useRef(null);return t.jsxs(F,{children:[t.jsx(Y,{navigationId:r,tableRef:n}),t.jsx(K,{tableRef:n},`page-${e}`)]},`search-${r}`)};export{Z as default};
//# sourceMappingURL=search-route-DLRKSfED.js.map
