const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-qz_z9GmZ.js","./index.css"])))=>i.map(i=>d[i]);
import{i as P,dx as f,bR as C,au as L,r as b,dy as i,j as o,cq as d,cl as r,x as p,cG as w,dz as D,dA as y,v as g,a1 as j,dB as u,dk as x,aD as O,dC as N,dD as W,N as A,dh as B,aO as k,bI as I,a2 as F,cj as m,s as _,_ as H}from"./index-qz_z9GmZ.js";const V=async()=>(await navigator.mediaDevices.enumerateDevices()||[]).filter(e=>e.kind==="audiooutput"),R=({hasFancyAudio:s})=>{const{t:e}=P(),t=f(),{setSettings:a}=C(),n=L(),[l,E]=b.useState([]);b.useEffect(()=>{const c=()=>{V().then(S=>E(S.map(h=>({label:h.label,value:h.deviceId})))).catch(()=>O.error({message:e("error.audioDeviceFetchError",{postProcess:"sentenceCase"})}))};t.type===i.WEB&&c()},[t.type,e]);const T=[{control:o.jsx(p,{data:[{disabled:!r(),label:"MPV",value:i.LOCAL},{label:"Web",value:i.WEB}],defaultValue:t.type,disabled:n===d.PLAYING,onChange:c=>{if(a({playback:{...t,type:c}}),r()&&c===i.LOCAL){const S=w.getState().actions.getPlayerData();D(S)}}}),description:e("setting.audioPlayer",{context:"description",postProcess:"sentenceCase"}),isHidden:!r(),note:n===d.PLAYING?e("common.playerMustBePaused",{postProcess:"sentenceCase"}):void 0,title:e("setting.audioPlayer",{postProcess:"sentenceCase"})},{control:o.jsx(p,{clearable:!0,data:l,defaultValue:t.audioDeviceId,disabled:t.type!==i.WEB,onChange:c=>a({playback:{...t,audioDeviceId:c}})}),description:e("setting.audioDevice",{context:"description",postProcess:"sentenceCase"}),isHidden:!r()||t.type!==i.WEB,title:e("setting.audioDevice",{postProcess:"sentenceCase"})},{control:o.jsx(p,{data:[{label:e("setting.playbackStyle",{context:"optionNormal",postProcess:"titleCase"}),value:y.GAPLESS},{label:e("setting.playbackStyle",{context:"optionCrossFade",postProcess:"titleCase"}),value:y.CROSSFADE}],defaultValue:t.style,disabled:t.type!==i.WEB||n===d.PLAYING,onChange:c=>a({playback:{...t,style:c}})}),description:e("setting.playbackStyle",{context:"description",postProcess:"sentenceCase"}),isHidden:t.type!==i.WEB,note:n===d.PLAYING?"Player must be paused":void 0,title:e("setting.playbackStyle",{context:"description",postProcess:"sentenceCase"})},{control:o.jsx(g,{defaultChecked:t.webAudio,onChange:c=>{a({playback:{...t,webAudio:c.currentTarget.checked}})}}),description:e("setting.webAudio",{context:"description",postProcess:"sentenceCase"}),isHidden:t.type!==i.WEB,note:e("common.restartRequired",{postProcess:"sentenceCase"}),title:e("setting.webAudio",{postProcess:"sentenceCase"})},{control:o.jsx(j,{defaultValue:t.crossfadeDuration,disabled:t.type!==i.WEB||t.style!==y.CROSSFADE||n===d.PLAYING,max:15,min:0,onChangeEnd:c=>a({playback:{...t,crossfadeDuration:c}}),w:100}),description:e("setting.crossfadeDuration",{context:"description",postProcess:"sentenceCase"}),isHidden:t.type!==i.WEB,note:n===d.PLAYING?"Player must be paused":void 0,title:e("setting.crossfadeDuration",{postProcess:"sentenceCase"})},{control:o.jsx(p,{data:[{label:"Linear",value:u.LINEAR},{label:"Constant Power",value:u.CONSTANT_POWER},{label:"Constant Power (Slow cut)",value:u.CONSTANT_POWER_SLOW_CUT},{label:"Constant Power (Slow fade)",value:u.CONSTANT_POWER_SLOW_FADE},{label:"Dipped",value:u.DIPPED},{label:"Equal Power",value:u.EQUALPOWER}],defaultValue:t.crossfadeStyle,disabled:t.type!==i.WEB||t.style!==y.CROSSFADE||n===d.PLAYING,onChange:c=>{c&&a({playback:{...t,crossfadeStyle:c}})},width:200}),description:e("setting.crossfadeStyle",{context:"description",postProcess:"sentenceCase"}),isHidden:t.type!==i.WEB,note:n===d.PLAYING?"Player must be paused":void 0,title:e("setting.crossfadeStyle",{postProcess:"sentenceCase"})}];return o.jsx(x,{divider:!s,options:T})},v=r()?window.api.localSettings:null,G=I(F)`
    & button {
        padding: 0;
    }
`,M=()=>{const{t:s}=P(),e=N(),{setSettings:t}=C(),a=[{control:o.jsx(g,{"aria-label":"Follow lyrics",defaultChecked:e.follow,onChange:n=>{t({lyrics:{...e,follow:n.currentTarget.checked}})}}),description:s("setting.followLyric",{context:"description",postProcess:"sentenceCase"}),title:s("setting.followLyric",{postProcess:"sentenceCase"})},{control:o.jsx(g,{"aria-label":"Enable fetching lyrics",defaultChecked:e.fetch,onChange:n=>{t({lyrics:{...e,fetch:n.currentTarget.checked}})}}),description:s("setting.lyricFetch",{context:"description",postProcess:"sentenceCase"}),isHidden:!r(),title:s("setting.lyricFetch",{postProcess:"sentenceCase"})},{control:o.jsx(G,{"aria-label":"Lyric providers",clearable:!0,data:Object.values(W),defaultValue:e.sources,onChange:n=>{v==null||v.set("lyrics",n),t({lyrics:{...e,sources:n}})},width:300}),description:s("setting.lyricFetchProvider",{context:"description",postProcess:"sentenceCase"}),isHidden:!r(),title:s("setting.lyricFetchProvider",{postProcess:"sentenceCase"})},{control:o.jsx(A,{defaultValue:e.delayMs,onBlur:n=>{const l=Number(n.currentTarget.value);t({lyrics:{...e,delayMs:l}})},step:10,width:100}),description:s("setting.lyricOffset",{context:"description",postProcess:"sentenceCase"}),isHidden:!r(),title:s("setting.lyricOffset",{postProcess:"sentenceCase"})},{control:o.jsx(p,{data:B,onChange:n=>{t({lyrics:{...e,translationTargetLanguage:n}})},value:e.translationTargetLanguage}),description:s("setting.translationTargetLanguage",{context:"description",postProcess:"sentenceCase"}),isHidden:!r(),title:s("setting.translationTargetLanguage",{postProcess:"sentenceCase"})},{control:o.jsx(p,{data:["Microsoft Azure","Google Cloud"],onChange:n=>{t({lyrics:{...e,translationApiProvider:n}})},value:e.translationApiProvider}),description:s("setting.translationApiProvider",{context:"description",postProcess:"sentenceCase"}),isHidden:!r(),title:s("setting.translationApiProvider",{postProcess:"sentenceCase"})},{control:o.jsx(k,{onChange:n=>{t({lyrics:{...e,translationApiKey:n.currentTarget.value}})},value:e.translationApiKey}),description:s("setting.translationApiKey",{context:"description",postProcess:"sentenceCase"}),isHidden:!r(),title:s("setting.translationApiKey",{postProcess:"sentenceCase"})}];return o.jsx(x,{divider:!1,options:a})},Y=()=>{const{t:s}=P(),e=f(),{setSettings:t}=C(),a=[{control:o.jsx(g,{"aria-label":"Toggle scrobble",defaultChecked:e.scrobble.enabled,onChange:n=>{t({playback:{...e,scrobble:{...e.scrobble,enabled:n.currentTarget.checked}}})}}),description:s("setting.scrobble",{context:"description",postProcess:"sentenceCase"}),title:s("setting.scrobble",{postProcess:"sentenceCase"})},{control:o.jsx(j,{"aria-label":"Scrobble percentage",defaultValue:e.scrobble.scrobbleAtPercentage,label:`${e.scrobble.scrobbleAtPercentage}%`,max:90,min:25,onChange:n=>{t({playback:{...e,scrobble:{...e.scrobble,scrobbleAtPercentage:n}}})},w:100}),description:s("setting.minimumScrobblePercentage",{context:"description",postProcess:"sentenceCase"}),title:s("setting.minimumScrobblePercentage",{postProcess:"sentenceCase"})},{control:o.jsx(A,{"aria-label":"Scrobble duration in seconds",defaultValue:e.scrobble.scrobbleAtDuration,max:1200,min:0,onChange:n=>{n!==""&&t({playback:{...e,scrobble:{...e.scrobble,scrobbleAtDuration:n}}})},width:75}),description:s("setting.minimumScrobbleSeconds",{context:"description",postProcess:"sentenceCase"}),title:s("setting.minimumScrobbleSeconds",{postProcess:"sentenceCase"})}];return o.jsx(x,{options:a})},q=()=>{const{t:s}=P(),{transcode:e}=f(),{setTranscodingConfig:t}=C(),a=s("setting.transcodeNote",{postProcess:"sentenceCase"}),n=[{control:o.jsx(g,{"aria-label":"Toggle transcode",defaultChecked:e.enabled,onChange:l=>{t({...e,enabled:l.currentTarget.checked})}}),description:s("setting.transcode",{context:"description",postProcess:"sentenceCase"}),note:a,title:s("setting.transcode",{postProcess:"sentenceCase"})},{control:o.jsx(A,{"aria-label":"Transcode bitrate",defaultValue:e.bitrate,min:0,onBlur:l=>{t({...e,bitrate:l.currentTarget.value?Number(l.currentTarget.value):void 0})},w:100}),description:s("setting.transcodeBitrate",{context:"description",postProcess:"sentenceCase"}),isHidden:!e.enabled,note:a,title:s("setting.transcodeBitrate",{postProcess:"sentenceCase"})},{control:o.jsx(k,{"aria-label":"transcoding format",defaultValue:e.format,onBlur:l=>{t({...e,format:l.currentTarget.value||void 0})},placeholder:"mp3, opus",width:100}),description:s("setting.transcodeFormat",{context:"description",postProcess:"sentenceCase"}),isHidden:!e.enabled,note:a,title:s("setting.transcodeFormat",{postProcess:"sentenceCase"})}];return o.jsx(x,{divider:!0,options:n})},K=b.lazy(()=>H(()=>import("./index-qz_z9GmZ.js").then(s=>s.dM),__vite__mapDeps([0,1]),import.meta.url).then(s=>({default:s.MpvSettings}))),Q=()=>{const s=m(a=>a.playback.type),e=m(a=>a.playback.webAudio),t=b.useMemo(()=>r()&&s===i.LOCAL||e&&"AudioContext"in window,[s,e]);return o.jsxs(_,{spacing:"md",children:[o.jsx(R,{hasFancyAudio:t}),o.jsx(b.Suspense,{fallback:o.jsx(o.Fragment,{}),children:t&&o.jsx(K,{})}),o.jsx(q,{}),o.jsx(Y,{}),o.jsx(M,{})]})};export{Q as PlaybackTab};
//# sourceMappingURL=playback-tab-ZpuDHVIw.js.map
